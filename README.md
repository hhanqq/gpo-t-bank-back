–†–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–æ –≤ —Ä–∞–º–∫–∞—Ö –ì—Ä—É–ø–ø–æ–≤–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–Ω–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è –≤ –¢–£–°–£–†–µ –ø–æ –∫–µ–π—Å—É –æ—Ç –¢-–ë–∞–Ω–∫–∞
---

# üöò T-Parking API

> **API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–∞—Ä–∫–æ–≤–æ—á–Ω—ã–º–∏ –º–µ—Å—Ç–∞–º–∏ –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏**

## –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

Parking Assistant ‚Äî —ç—Ç–æ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –ø–æ–∑–≤–æ–ª—è—é—â–µ–µ —É–ø—Ä–∞–≤–ª—è—Ç—å –ø–∞—Ä–∫–æ–≤–æ—á–Ω—ã–º–∏ –º–µ—Å—Ç–∞–º–∏ –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏. –°–∏—Å—Ç–µ–º–∞ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —É–¥–æ–±–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏, –≤—Ö–æ–¥–∞, –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–∞—Ä–∫–æ–≤–æ—á–Ω—ã—Ö –º–µ—Å—Ç–∞—Ö (–∑–∞–Ω—è—Ç–æ/—Å–≤–æ–±–æ–¥–Ω–æ), –∞ —Ç–∞–∫–∂–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞–º —É–ø—Ä–∞–≤–ª—è—Ç—å –¥–∞–Ω–Ω—ã–º–∏.

### üß† –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:
- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –ü—Ä–æ—Å–º–æ—Ç—Ä —ç—Ç–∞–∂–µ–π –∏ –ø–∞—Ä–∫–æ–≤–æ—á–Ω—ã—Ö –º–µ—Å—Ç
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –ø–∞—Ä–∫–æ–≤–æ—á–Ω–æ–≥–æ –º–µ—Å—Ç–∞
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –∏ –ø–∞—Ä–∫–æ–≤–∫–∞–º–∏ (—Ç–æ–ª—å–∫–æ –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤)

---

## üõ†Ô∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

–ü—Ä–æ–µ–∫—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Å–ª–µ–¥—É—é—â–∏—Ö —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π:

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è       | –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è                         |
|----------------|------------------------------------|
| Backend        | FastAPI, SQLAlchemy ORM            |
| –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö    | PostgreSQL                         |
| –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è | JWT, OAuth2                        |
| –ú–∏–≥—Ä–∞—Ü–∏–∏       | Alembic                            |
| –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã     | Docker, Docker Compose             |
| –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ    | Python logging                     |
| –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ   | Pytest (—á–∞—Å—Ç–∏—á–Ω–æ)                  |

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
.
‚îú‚îÄ‚îÄ alembic/              # –ú–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ config/           # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îú‚îÄ‚îÄ core/             # –õ–æ–≥–∏–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (JWT)
‚îÇ   ‚îú‚îÄ‚îÄ crud/             # CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ models/           # –ú–æ–¥–µ–ª–∏ SQLAlchemy
‚îÇ   ‚îú‚îÄ‚îÄ routers/          # –†–æ—É—Ç–µ—Ä—ã FastAPI
‚îÇ   ‚îú‚îÄ‚îÄ schemas/          # Pydantic –º–æ–¥–µ–ª–∏ (–≤–∞–ª–∏–¥–∞—Ü–∏—è)
‚îÇ   ‚îî‚îÄ‚îÄ main.py           # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ FastAPI
‚îú‚îÄ‚îÄ docker-compose.yml    # –û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤
‚îú‚îÄ‚îÄ Dockerfile            # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
‚îú‚îÄ‚îÄ requirements.txt      # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Python
‚îî‚îÄ‚îÄ README.md             # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

---

## üóÇÔ∏è –ú–æ–¥–µ–ª–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### 1. `User` (`app/models/user.py`)
```python
id: int
first_name: str
last_name: str
middle_name: Optional[str]
email: str (unique)
telegram_username: Optional[str]
office_address: str
hashed_password: str
is_active: bool
is_admin: bool
is_email_verified: bool
created_at: datetime
```

### 2. `Floor` (`app/models/floor.py`)
```python
id: int
name: str (unique, –Ω–∞–ø—Ä–∏–º–µ—Ä: B1, B2)
```

### 3. `ParkingSpot` (`app/models/parking_spot.py`)
```python
id: int
number: str (unique)
is_occupied: bool
occupied_by_id: Optional[int] (Foreign Key –∫ User.id)
floor_id: int (Foreign Key –∫ Floor.id)
updated_at: datetime
```

---

## üåê API Endpoints

### **Auth**
- `POST /api/auth/register` ‚Äî —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `POST /api/auth/login` ‚Äî –ø–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞

### **Floors**
- `POST /floors/` ‚Äî –¥–æ–±–∞–≤–∏—Ç—å —ç—Ç–∞–∂
- `GET /floors/` ‚Äî –ø–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ —ç—Ç–∞–∂–µ–π

### **Parking Spots**
- `POST /spots/` ‚Äî –¥–æ–±–∞–≤–∏—Ç—å –ø–∞—Ä–∫–æ–≤–æ—á–Ω–æ–µ –º–µ—Å—Ç–æ
- `GET /spots/` ‚Äî –ø–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –ø–∞—Ä–∫–æ–≤–æ—á–Ω—ã—Ö –º–µ—Å—Ç
- `PUT /spots/{spot_id}` ‚Äî –æ–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å –ø–∞—Ä–∫–æ–≤–∫–∏

### **Admin Panel**
- `GET /admin/spots` ‚Äî –ø—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö –ø–∞—Ä–∫–æ–≤–æ–∫ (—Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω)
- `PUT /admin/spots/{spot_id}` ‚Äî –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–∫–æ–≤–∫–∏ (–∞–¥–º–∏–Ω)
- `GET /admin/users` ‚Äî –ø—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–∞–¥–º–∏–Ω)
- `PUT /admin/users/{user_id}` ‚Äî –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–∞–¥–º–∏–Ω)

---

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è JWT-—Ç–æ–∫–µ–Ω –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ (`access_token`)
- –ó–∞—â–∏—Ç–∞ –ø–∞—Ä–æ–ª–µ–π —á–µ—Ä–µ–∑ `bcrypt`
- –†–∞–∑–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø—Ä–∞–≤: –æ–±—ã—á–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã
- –í—Å–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã —Ç—Ä–µ–±—É—é—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

---

## üîÑ –ú–∏–≥—Ä–∞—Ü–∏–∏

–î–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏—è–º–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **Alembic**:

```bash
alembic revision --autogenerate -m "–û–ø–∏—Å–∞–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏"
alembic upgrade head
```

---

## üê≥ –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞

### –ü–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º:
–°–æ–∑–¥–∞–π—Ç–µ `.env` —Ñ–∞–π–ª –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:
```env
POSTGRES_USER=admin
POSTGRES_PASSWORD=password
POSTGRES_DB=parking_db
DATABASE_URL=postgresql+psycopg2://admin:password@db:5432/parking_db
SECRET_KEY=your_secret_key_here
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30
```

### –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Docker:
```bash
docker-compose up -d
```

–°–µ—Ä–≤–∏—Å—ã:
- **FastAPI**: `http://localhost:8000`
- **PostgreSQL**: `localhost:5432`
- **pgAdmin**: `http://localhost:5050`

---

## üìò –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:
- **Swagger UI**: [http://localhost:8000/docs](http://localhost:8000/docs)
- **ReDoc**: [http://localhost:8000/redoc](http://localhost:8000/redoc)

---

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License

--- 
